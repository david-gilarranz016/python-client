# Python Webshell Client

## Description

This repository implements a python-based client to interact with the
[PHP Webshell](https://github.com/david-gilarranz016/php-webshell) developed as part of the 
thesis for the Software Engineering and Information Systems master's degree.

Both the shell and the client are not designed to be used on their own, but to be customized
and generated by the [Web Shell generator](https://github.com/david-gilarranz016/wonka-generator/).
As such, direct usage of the client in this repository by end users is **strongly discouraged**, since
it is only meant to feed the generator.

## Instructions for Users

Even if the usage of this client as-is is strongly discouraged, it is nonetheless possible to do so.
If a user desires to make direct usage of the client supplied in this repository, the following steps
must be taken.

1. Install the required dependencies:

```bash
pip install -r requirements.txt
```

2. Modify the `key` (`client/__main__.py:70`) and `nonce` (`client/__main__.py:70`) to match those
used by the Web Shell with which the client is intended to communicate.

3. Run the client, supplying the target url.

```
python -m client --url=http://example.com/shell.php
```

Once the interactive environment has been loaded, it is recommended to run the `!help` command in
order to familiarize oneself with the available features. Note that if the requested feature is not
supported by the Web Shell, an error message will be shown.

The following snippet shows the contents of the help menu.

```bash
$ !help


Client for interacting with the remote webshell. The following actions are available:

- <cmd>              : run the desired shell command on the target.
- exit               : quit the shell.
- !get <filename>    : download a text file.
- !binget <filename> : download a binary file.
- !put <filename>    : upload a text file.
- !binput <filename> : upload a binary file.
- !history           : view a list of all previously executed commands.
- !delete            : clear the command history.
- !<cmd>             : repeat the last command that starts with the provided string.
- !help              : show this help menu.
```


## Instructions for Developers

The project includes a set of unit tests in order to verify the quality of the developed client. It is
strongly recommended to keep growing the test base if any modifications are to be made, as well as
running the existent tests to verify that the changes introduced have not broken the code.

In order to run the unit tests, it is first imperative to install the testing dependencies specified
in the `requirements.txt` file. To do so, the following command can be used:

```bash
pip install -r requirements.txt
```

Once the required dependencies have been installed, the developer can run the unit tests by running
the pytest executable:

```bash
pytest
```

Note that the usage of a [python virtual environment](https://docs.python.org/3/library/venv.html) is strongly
encouraged.
